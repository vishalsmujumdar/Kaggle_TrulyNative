from textblob import TextBlob
import math
import heapq

def word_count(blob, word):
    return blob.words.count(word)

def tf(word, blob):
    return word_count(blob, word)/ len(blob.words)

def n_containing(word, list_of_docs):
    return sum(1 for blob in list_of_docs if word in blob)

def idf(word, list_of_docs):
    return math.log(len(list_of_docs) / (1 + n_containing(word, list_of_docs)))

def tfidf(word, blob, list_of_docs):
    return tf(word, blob) * idf(word, list_of_docs)

def convert_to_textblobs(list_of_documents):
    return dict([k, TextBlob(v)] for k, v in list_of_documents.items())

def sorted_words(prominent_words):
    return heapq.nlargest(len(prominent_words), prominent_words)

def main():
    list_of_documents = {'1007719_raw_html.txt': 'giusepp penon idea stone close search art contemporari creativ photograph public street design architectur fashion interior product technolog vanguard art scienc social studi start instal contribut artist issu partner advertis instal media llc instal menu tweet share read giusepp penon idea stone brook kamin rapaport madison squar park conserv ssenior curatorbrook kamin rapaport speak creation bronz landscap italian artist giusepp penon york citi instal magazin curatori background brook kamin rapaport prior madison squar park work independ curat art writer guest curat jewish museum york organ houdini art magic sculptur louis nevelson construct legend assist curat associ curat contemporari art brooklyn museum organ numer exhibit includ instal contemporari artist grand lobbi seri work meg webster houston conwil donald lipski komar melamid realiz monument project contribut editor frequent writer sculptur magazin blog artist materi process work instal scale madison squar park work giusepp penon idea stone inspir scale instal majest artist acut sens bronz tree sculptur park landscap instal view giusepp penon idea stone ide di pietra madison squar park photographi jame ewe madison squar park conserv locat determin giusepp penon visit madison squar park year view site determin peopl interact green oasi middl manhattan comment park perimet histor skyscrap disson car taxi bicycl traffic pedestrian influenc vision instal mind chang season live tree impact sculptur tree penon site sculptur ide di pietra olmo idea stone elm triplic tripl ide di pietra di luce idea stone light sensit correct placement work oval lawn space influenc experi instal bronz sculptur subtl contempl visitor park mesmer quietud refug penon tree tree anim flora site experi work artist giusepp penon pleasur work sculptor exact artist goal madison squar park simpli display bronz tree viewer recogn respond outset instal determinedli walk site instal angl determin viewer experi object instal view giusepp penon idea stone ide di pietra madison squar park photographi jame ewe madison squar park conserv challeng present work artist arriv site york turin survey site knew idea stone elm north area oval lawn switch origin plan updat idea placement correct hope instal kind experi hope public walk public fascin bronz sculptur true life cast itali actual elm nettl chestnut tree locat oval lawn matur tree happili confound peopl close amaz heavi ponder boulder nestl tree branch trunk moment fascin enraptur investig audienc portrait artist madison squar park photographi jame ewe madison squar park conserv featur imag instal view giusepp penon idea stone ide di pietra madison squar park photographi jame ewe madison squar park conserv archiv uncategor tag brook kamin rapaport fitz giusepp penon idea stone ide di pietra instal instal issu madison squar park bookmark permalink share articl facebook twitter articl previou articl van kalsbeek zundert flower parad edo dijksterhui bilg nur saltik bilg nur saltik',
                         '86655_raw_html.txt': 'dimens festiv underground music abandon fort festiv ticket travel accommod pic vid music programm festiv amphitheatr concert boat parti stage arena launch parti info local info contact partner music media partner ticket partner involv mail list volunt volunt work rep dimens press media concess stand ticket open concert accommod travel boat parti ticket accommod travel',
                         '2315269_raw_html.txt': 'real reason slenderman creepi ghost diari shop unexplain paranorm ghost vampir zombi conspiraci entertain horror movi alien scienc list real reason slenderman creepi paranorm featur imag creepypasta wiki slenderman crowdsourc fiction charact creat internet meme point fan art cosplay onlin fiction contain paranorm commun creepypasta aw mytholog folklor develop year footag doctor photo eyewit stori children stalk tall suit tentacl ghoul fed develop power teleport mind read mind control attribut charact exist centuri lurk backdrop children play pretti creepi huh real reason slenderman creepi wisconsin attempt murder classmat stab time claim control slenderman psychic control report kid claim commit crime order prove exist slenderman love creepi stori love dark macabr conspiraci involv inscrut ghoul demon love horrifi urban legend appal fiction creation spur behavior site exempt blame tragedi post slenderman fring cultur time sensation paranorm teen adult told kill demon spirit feverish promulg promot pop viral fear internet reach tip slenderman children kill frazzl adolesc hormon patholog embolden view webmast ghost paranorm entiti real form fear onlin entiti scarier real reason slenderman creepi kill real post photo mysteri swiss boogeyman le loyan creepi urban legend black eye kid stun occult photo mysteri photo psychic fortun teller sign age paranorm transhuman wreck fake slenderman real creepi pasta fan fic urban legend sadli girl commit deprav slenderman life global manifest fear pb idea channel youtub talk bit call tulpa mind conjur apparit slenderman subconsci planet social civil unrest link video start talk min sign creepi newslett email address join follow ghostdiaryblog share post tweet check shop book month copyright theghostdiari',
                         '560541_raw_html.txt': 'reflect tip budget money money loan money januari reflect tip budget onset decad remind bit older bit wiser year resolut chanc reflect desir year quiet moment christma break eye open budget spreadsheet year time move hous task total unrel manag collid awar remind life direct peopl financ day unpack box book bought start work wasabout save incom time receiv small book outlin effect compound benefit save raini day began talli idea public wheni receiv figur astound year endur good time bad time bone bum enorm incom employ consist lesser wast mental bank balanc consider ungrat bless life pan renew vision instruct boy deal financ time join armi earn fortnight thought outstand book list asset liabil room asset honda motorbik beanbag tape record liabil owe greg cock high school month earlier pay greg owe hope doesnt understand effect compound eaither asi owe jump year asset modestli provid warm comfort heart liabil posit evidentalmost stop knew year start budget busi coach instruct budget busi sort ask prepar person budget troubl start shop checkout final talli short cash person budget compar supermarket shop trip store grant return compar item luxuri aisl type continu shop life trolley item sustain feel good fine pay bill holiday provid excess children demand nice life click day pen paper sort awaken bitter pill swallow bring cohes famili focu life funnili want share budget famili hope exercis great lesson ground fantast lesson show gratitud opportun posit mind congratul exercis fruit involv famili humor ask children year boy write thought spent month item understand tooi dollar boy mum dad spend month bw tip budget adult input famili financ play ostrich head sand person offer fresh insight input hey main player sick pressur share workload keep famili budget afloat job set time start month review budget actual spend greater tragedi prepar great budget unopen document folder avoid overboard cut spend stage life enjoy draw fli class cut slack honest truth hurt simplifi bank arrang bpay direct debit fix expens direct debit account food variabl expens touch account pay arrang high account save raini day invest split save raini day school book anniversari mum dad raini day budget invest wise avoid scam high promis high risk person belief invest reach invest long term tempt invest consid propos spoken partner planner week prefer day includ week sit list spend money worth awar basic list strangest time pen handi write includ budget time amend aim goal list shorter strategi manag pay extra high loan credit card car loan budget exercis consolid debt loan yield cash flow type figur greater thrill head card payment loan remov list disciplin time hey alright save month differ differ live julia age celebr victori come budget spent thought save invest strategi attend look futur month isol expenditur come blow ofit life live send free budget head readi add email attend reblog post rate repriev christma januari merri christma famili friend year slowli crawl jaw beast gfc make freedom exist client thankyou heart client support local busi gratitud great peopl deal speak rate australia previou post bank breakup benefit heard bank break great news loan borrow lender rush introduc rang incent encourag peopl switch ian follow search fan comment doug joann wright ian accept refin expert subscrib blog feed power typepad'}
    list_of_documents = convert_to_textblobs(list_of_documents)
    for doc_name, text_blob in list_of_documents.items():
        print("Top words in document "+doc_name)
        scores = {eachword: tfidf(eachword, text_blob, list_of_documents ) for eachword in text_blob.words}
        print(scores)
        sorted_words = sorted(scores.items(), key=lambda x: x[1], reverse=True)
        for eachword, score in sorted_words[:]:
            print("\tWord: {}, TF-IDF: {}".format(eachword, round(score, 5)))


if __name__ == '__main__':
    main()